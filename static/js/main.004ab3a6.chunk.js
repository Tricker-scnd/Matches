(this.webpackJsonpmatches=this.webpackJsonpmatches||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var s,n,c,r,o=a(1),i=a.n(o),l=a(8),u=a.n(l),m=(a(13),a(3));!function(e){e.PREPARE="PREPARE",e.INGAME="INGAME",e.FINISHED="FINISHED"}(s||(s={})),function(e){e.WIN="WIN",e.LOSE="LOSE",e.NEVER="NEVER"}(n||(n={})),function(e){e.ME="ME",e.ENEMY="ENEMY",e.NEVER="NEVER"}(c||(c={})),function(e){e.PLAYER="PLAYER",e.BOT="BOT"}(r||(r={}));var j=a(0),b=function(e){var t=e.size,a=void 0===t?"default":t,s="big"===a?"icon--big":"small"===a?"icon--small":"";return Object(j.jsxs)("span",{className:"match-icon ".concat(s),children:[Object(j.jsx)("i",{children:"\ud83d\udd25"}),Object(j.jsx)("i",{})]})},h=i.a.memo((function(e){var t=e.showSettingsHandler,a=e.gameInfo;return Object(j.jsxs)("div",{className:"game-header",children:[Object(j.jsx)("div",{className:"game-header__title",children:a.gameStatus!==s.INGAME?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{className:"",children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0438\u0433\u0440\u0430\u0442\u044c"}),Object(j.jsx)(b,{size:"small"})]}):a.gameTurn===c.ME?Object(j.jsx)("h3",{className:"your-turn",children:"\u0412\u0430\u0448 \u0445\u043e\u0434"}):Object(j.jsxs)("h3",{className:"enemy-turn",children:["\u0425\u043e\u0434 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430 ",Object(j.jsx)("span",{className:"time-icon",children:"\u231b"})]})}),Object(j.jsx)("div",{className:"game-header__action",children:Object(j.jsx)("button",{className:"btn btn--settings",onClick:function(){return t(!0)},children:"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u2699\ufe0f"})})]})})),d=i.a.createContext({}),g=function(e){var t=e.oponent,a=e.playerLog,s=t?"bot":"player";return Object(j.jsx)("div",{className:"player-stats__log",children:a.map((function(e,t){return Object(j.jsx)("div",{className:"player-stats__action",children:e},e+s+t)}))})},O=function(e){var t=e.oponent,a=e.count,s=e.playerLog;return Object(j.jsx)(j.Fragment,{children:t?Object(j.jsxs)("div",{className:"players-container__column",children:[Object(j.jsx)("h4",{className:"oponent",children:"\u0421\u043e\u043f\u0435\u0440\u043d\u0438\u043a"}),Object(j.jsxs)("div",{className:"player-stats__wrapper",children:[Object(j.jsxs)("div",{className:"player-stats-container",children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{className:"player-stats__counter",children:a})]}),Object(j.jsx)(g,{playerLog:s})]})]}):Object(j.jsxs)("div",{className:"players-container__column",children:[Object(j.jsx)("h4",{children:"\u0412\u044b"}),Object(j.jsxs)("div",{className:"player-stats__wrapper",children:[Object(j.jsxs)("div",{className:"player-stats-container",children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{className:"player-stats__counter",children:a})]}),Object(j.jsx)(g,{playerLog:s,oponent:!0})]})]})})},x=i.a.memo((function(){var e=Object(o.useContext)(d).useGameContext,t=e.gameInfo,a=e.playersInfo;return Object(j.jsx)("div",{className:"players-container",children:t.gameStatus!==s.PREPARE&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O,{count:a.playerScore,playerLog:a.playerLog}),Object(j.jsx)(O,{count:a.botScore,playerLog:a.botLog,oponent:!0})]})})})),p=function(e){return e%2===0},N=function(e,t){for(var a=0,s=1;s<=t;s++)if(s%2!==0){if((e-s)%4===1)return s;(e-s)%4===0&&(a=s)}return a};function E(){var e=Object(o.useContext)(d).useGameContext,t=e.playersInfo,a=e.gameInfo,s=e.matchesInfo,n=e.handlers;return{botChose:function(){setTimeout((function(){if(0!==s.currentMatchesCount){var e,r,o,i,l,u=(s.totalMatches-1)/2%4!==0,m=s.maximumMatchesToChose%2===0;if(2*s.maximumMatchesToChose>s.currentMatchesCount)return r=t.botScore,e=(o=s.currentMatchesCount)>s.maximumMatchesToChose?1===o-s.maximumMatchesToChose&&p(t.playerScore)?s.maximumMatchesToChose:N(o,s.maximumMatchesToChose):p(r+o)?o:0!==o?1===o?1:o-1:0,void n.botChoseHandler(e);if(u||m)return e=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0,n=1,c=t%2!==0?4:6;if(4===c){for(var r=1;r<=t;r++)if(r%2!==0||a){if((e-r)%c===0)return r;(e-r)%c===1&&(n=r)}}else for(var o=1;o<=t;o++)if(s%2===0||0===s){if((e-o)%c===1)return o;(e-o)%c===0&&(n=o)}else if((e-o)%c===5)return o;return n}(s.currentMatchesCount,s.maximumMatchesToChose,a.firstTurn===c.ENEMY&&0===t.botScore,t.botScore),void n.botChoseHandler(e);a.firstTurn===c.ENEMY?(i=s.currentMatchesCount,l=s.maximumMatchesToChose,e=Math.round(i-.5+Math.random()*(l-i+1))):e=N(s.currentMatchesCount,s.maximumMatchesToChose),n.botChoseHandler(e)}}),1500)}}}var f,_=function(e){var t=e.maxCount,a=e.currentCount;return Object(j.jsx)(j.Fragment,{children:new Array(t>=10?9:t).fill(0,0).map((function(e,t){return Object(j.jsx)("button",{className:"btn btn--num ".concat(t+1>a?"btn--no-active":""),"data-value":t+1,children:t+1},"btn".concat(t))}))})},v=function(e){var t=e.matchesInfo,a=e.sendChose,s=e.turn,n=Object(o.useState)(!1),r=Object(m.a)(n,2),i=r[0],l=r[1],u=Object(o.useState)(0),b=Object(m.a)(u,2),h=b[0],d=b[1],g=Object(o.useCallback)((function(e,a){return!isNaN(e)&&e>(a?-1:0)&&e<=t.currentMatchesCount&&e<=t.maximumMatchesToChose}),[t.maximumMatchesToChose]);return Object(j.jsxs)("div",{className:"actions-block",children:[Object(j.jsx)("div",{className:"actions-block__line action-line--first",children:Object(j.jsx)("button",{className:"btn ".concat(i||s!==c.ME&&"btn--no-active"),onClick:function(){s===c.ME&&l(!0)},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0438\u0447\u043a\u0438"})}),Object(j.jsx)("div",{className:"actions-block__line",children:i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"actions-block__title",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u0441\u043f\u0438\u0447\u0435\u043a:"}),Object(j.jsxs)("div",{className:"actions-block__buttons-container",onClick:function(e){if(e.target.classList.contains("btn")){var t=Number(e.target.dataset.value);g(t)&&(a(t),l(!1))}},children:[Object(j.jsx)(_,{maxCount:t.maximumMatchesToChose,currentCount:t.currentMatchesCount}),t.maximumMatchesToChose>=10&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{className:"actions-block__label",children:"\u041b\u0438\u0431\u043e \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e"}),Object(j.jsxs)("div",{className:"actions-block__input-container",children:[Object(j.jsx)("input",{type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e",onChange:function(e){var t=Number(e.target.value);g(t,!0)&&d(t)},value:h}),Object(j.jsx)("button",{className:"btn btn--apply-chose ".concat(0===h&&"btn--no-active"),onClick:function(){g(h)&&(a(h),l(!1))},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"})]})]})]})]})})]})},C=function(e){var t=e.matchesInfo;return Object(j.jsxs)("div",{className:"matches-stats",children:[Object(j.jsx)(b,{size:"big"}),Object(j.jsxs)("div",{className:"matches-stats__counter",children:[Object(j.jsx)("span",{className:"counter-item",children:t.currentMatchesCount}),Object(j.jsx)("span",{className:"counter-item",children:"/"}),Object(j.jsx)("span",{className:"counter-item",children:t.totalMatches})]})]})},S=i.a.memo((function(){var e=Object(o.useContext)(d).useGameContext,t=e.handlers,a=e.matchesInfo,s=e.gameInfo,n=E().botChose;return Object(o.useEffect)((function(){s.gameTurn===c.ENEMY&&n()}),[s.gameTurn]),Object(j.jsxs)("div",{className:"game-active__wrapper",children:[Object(j.jsxs)("span",{className:"limit-label",children:["\u041b\u0438\u043c\u0438\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0441\u043f\u0438\u0447\u0435\u043a: ",Object(j.jsxs)("b",{children:[a.maximumMatchesToChose," \u0448\u0442."]})]}),Object(j.jsx)(C,{matchesInfo:a}),Object(j.jsx)(v,{matchesInfo:a,sendChose:t.playerChose,turn:s.gameTurn})]})})),M=function(){var e=Object(o.useContext)(d).useGameContext,t=e.handlers,a=e.gameInfo;return Object(j.jsx)("div",{className:"game-prepare__wrapper",children:a.gameStatus===s.PREPARE?Object(j.jsx)("button",{className:"btn",onClick:function(){return t.gameStatusHandler(s.INGAME)},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"}):a.gameStatus===s.FINISHED&&Object(j.jsxs)("div",{className:"game-result__container",children:[a.gameResult===n.WIN?Object(j.jsx)("h3",{className:"win",children:"\u041f\u043e\u0431\u0435\u0434\u0430 !"}):Object(j.jsx)("h3",{className:"lose",children:"\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(j.jsx)("button",{className:"btn",onClick:function(){t.gameStatusHandler(s.INGAME),t.restartGameHandler()},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"})]})})},T=function(e){var t=e.title,a=e.active,s=void 0!==a&&a,n=e.onClick;return Object(j.jsx)("button",{className:"btn switch-btn ".concat(s&&"switch-btn--active"),onClick:n,children:t})},y=function(e){var t=e.title,a=e.titleHint,s=e.groupField,n=e.children;return Object(j.jsxs)("div",{className:"settings__row",children:[Object(j.jsxs)("div",{className:"settings__row--title",children:[t,a&&Object(j.jsxs)("span",{children:["(",a,")"]})]}),Object(j.jsx)("div",{className:"settings__row--field ".concat(s?"settings__row--group-field":""),children:n})]})},A=function(e){var t=e.showSettingsHandler,a=Object(o.useContext)(d).useGameContext,n=a.handlers,r=a.matchesInfo,i=a.gameInfo,l=Object(o.useState)(""),u=Object(m.a)(l,2),b=u[0],h=u[1],g=Object(o.useState)(r.totalMatches),O=Object(m.a)(g,2),x=O[0],p=O[1],N=Object(o.useState)(r.maximumMatchesToChose),E=Object(m.a)(N,2),f=E[0],_=E[1],v=Object(o.useState)(i.firstTurn),C=Object(m.a)(v,2),S=C[0],M=C[1],A=Object(o.useCallback)((function(){f+1>=x?h("\u0412\u044b\u0431\u043e\u0440 \u0441\u043f\u0438\u0447\u0435\u043a \u0437\u0430 \u0445\u043e\u0434, \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043c\u0435\u043d\u044c\u0448\u0435!"):f<3?h("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 3"):x<25?h("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e 25 \u0441\u043f\u0438\u0447\u0435\u043a"):x%2!==0?(h(""),n.settingsApplyHandler(x,f,S),n.restartGameHandler(),t(!1)):h("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0438\u0447\u0435\u043a \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u0447\u0435\u0442\u043d\u044b\u043c")}),[x,f,S]);return Object(j.jsxs)("div",{className:"game-settings__wrapper",children:[Object(j.jsx)("button",{className:"btn btn--close",onClick:function(){return t(!1)},children:"\xd7"}),Object(j.jsx)("h3",{className:"settings__title",children:"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(j.jsxs)("div",{className:"settings__body",children:[Object(j.jsxs)(y,{title:"\u041f\u0435\u0440\u0432\u044b\u0439 \u0445\u043e\u0434",groupField:!0,children:[Object(j.jsx)(T,{title:"\u041c\u043e\u0439",active:S===c.ME,onClick:function(){return M(c.ME)}}),Object(j.jsx)(T,{title:"\u0421\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430",active:S===c.ENEMY,onClick:function(){return M(c.ENEMY)}})]}),Object(j.jsxs)(y,{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0438\u0447\u0435\u043a",titleHint:"\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0447\u0435\u0442\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e",children:[Object(j.jsx)("input",{type:"text",value:x,onChange:function(e){var t=Number(e.target.value);isNaN(t)||t<1001&&p(t)}}),Object(j.jsx)("span",{className:"input-hint",children:"max:1000"})]}),Object(j.jsx)(y,{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0441\u043f\u0438\u0447\u0435\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0437\u0430 \u0445\u043e\u0434",children:Object(j.jsx)("input",{type:"text",value:f,onChange:function(e){var t=Number(e.target.value);isNaN(t)||t<x&&_(t)}})}),Object(j.jsx)("div",{className:"settings__error-label",children:b})]}),Object(j.jsx)("div",{className:"settings__footer",children:Object(j.jsxs)("button",{className:"btn btn--white",onClick:A,children:["\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c ",i.gameStatus!==s.PREPARE&&" \u0438 \u043d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"]})})]})},R=function(){var e=Object(o.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(o.useContext)(d).useGameContext.gameInfo;return Object(j.jsxs)("div",{className:"game",children:[Object(j.jsx)(h,{showSettingsHandler:n,gameInfo:c}),Object(j.jsxs)("div",{className:"game-main-container",children:[c.gameStatus===s.INGAME?Object(j.jsx)(S,{}):Object(j.jsx)(M,{}),a&&Object(j.jsx)(A,{showSettingsHandler:n})]}),Object(j.jsx)(x,{})]})},G=a(5),L=a(2);!function(e){e.CHANGE_GAME_STATUS="CHANGE_GAME_STATUS",e.CHANGE_GAME_RESULT="CHANGE_GAME_RESULT",e.CHANGE_GAME_TURN="CHANGE_GAME_TURN",e.APPLY_SETTINGS="APPLY_SETTINGS",e.APPLY_MATCHES_CHOSE="APPLY_MATCHES_CHOSE",e.RESTART_GAME="RESTART_GAME"}(f||(f={}));var I=function(e,t){return{type:f.APPLY_MATCHES_CHOSE,payload:{num:e,player:t}}},H={gameResult:n.NEVER,gameStatus:s.PREPARE,gameTurn:c.NEVER,game:{player:0,bot:0,playerLog:[],botLog:[]},settings:{totalMatches:25,maximumMatchesToChose:3,firstTurn:c.ME}};function P(e,t){switch(t.type){case f.CHANGE_GAME_STATUS:return t.payload===s.INGAME?Object(L.a)(Object(L.a)({},e),{},{gameStatus:t.payload,gameTurn:e.settings.firstTurn}):Object(L.a)(Object(L.a)({},e),{},{gameStatus:t.payload});case f.CHANGE_GAME_RESULT:return Object(L.a)(Object(L.a)({},e),{},{gameStatus:s.FINISHED,gameResult:t.payload});case f.CHANGE_GAME_TURN:return Object(L.a)(Object(L.a)({},e),{},{gameTurn:t.payload});case f.APPLY_SETTINGS:return Object(L.a)(Object(L.a)({},e),{},{settings:Object(L.a)({},t.payload)});case f.APPLY_MATCHES_CHOSE:var a=t.payload,o=a.num,i=a.player,l={gameResult:e.gameResult,gameStatus:e.gameStatus,gameTurn:e.gameTurn,playerScore:e.game.player,botScore:e.game.bot,playerLog:Object(G.a)(e.game.playerLog),botLog:Object(G.a)(e.game.botLog)};return i===r.PLAYER?(l.playerScore=e.game.player+t.payload.num,l.playerLog=[].concat(Object(G.a)(e.game.playerLog),["\u0412\u0437\u044f\u043b ".concat(o)]),l.gameTurn=c.ENEMY):i===r.BOT&&(l.botScore=e.game.bot+t.payload.num,l.botLog=[].concat(Object(G.a)(e.game.botLog),["\u0412\u0437\u044f\u043b ".concat(o)]),l.gameTurn=c.ME),e.settings.totalMatches-l.playerScore-l.botScore<=0&&(l.gameStatus=s.FINISHED,l.playerScore%2===0?l.gameResult=n.WIN:l.gameResult=n.LOSE),Object(L.a)(Object(L.a)({},e),{},{gameStatus:l.gameStatus,gameTurn:l.gameTurn,gameResult:l.gameResult,game:{player:l.playerScore,playerLog:l.playerLog,bot:l.botScore,botLog:l.botLog}});case f.RESTART_GAME:return{gameResult:n.NEVER,gameStatus:s.INGAME,gameTurn:e.settings.firstTurn,game:{player:0,bot:0,playerLog:[],botLog:[]},settings:Object(L.a)({},e.settings)};default:return e}}function w(){var e=Object(o.useReducer)(P,H),t=Object(m.a)(e,2),a=t[0],s=t[1],n={gameStatusHandler:function(e){var t;s((t=e,{type:f.CHANGE_GAME_STATUS,payload:t}))},gameTurnHandler:function(e){var t;s((t=e,{type:f.CHANGE_GAME_TURN,payload:t}))},gameResultHandler:function(e){var t;s((t=e,{type:f.CHANGE_GAME_RESULT,payload:t}))},settingsApplyHandler:function(e,t,a){var n;s((n={totalMatches:e,maximumMatchesToChose:t,firstTurn:a},{type:f.APPLY_SETTINGS,payload:n}))},restartGameHandler:function(){s({type:f.RESTART_GAME})},playerChose:function(e){s(I(e,r.PLAYER))},botChoseHandler:function(e){s(I(e,r.BOT))}},c={currentMatchesCount:Number(a.settings.totalMatches)-(Number(a.game.player)+Number(a.game.bot)),maximumMatchesToChose:a.settings.maximumMatchesToChose,totalMatches:a.settings.totalMatches},i={playerScore:a.game.player,botScore:a.game.bot,playerLog:a.game.playerLog,botLog:a.game.botLog};return{handlers:n,matchesInfo:c,gameInfo:{gameStatus:a.gameStatus,gameResult:a.gameResult,gameTurn:a.gameTurn,firstTurn:a.settings.firstTurn},playersInfo:i}}var k=function(){var e=w();return Object(j.jsx)(d.Provider,{value:{useGameContext:e},children:Object(j.jsx)("div",{className:"root-wrapper",children:Object(j.jsx)("div",{className:"main-window",children:Object(j.jsx)("div",{className:"main-window__wrapper",children:Object(j.jsx)(R,{})})})})})};u.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.004ab3a6.chunk.js.map