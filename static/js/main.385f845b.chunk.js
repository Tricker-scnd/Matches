(this.webpackJsonpmatches=this.webpackJsonpmatches||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c,s,n,r=a(1),i=a.n(r),l=a(8),o=a.n(l),u=(a(13),a(3));!function(e){e.PREPARE="PREPARE",e.INGAME="INGAME",e.FINISHED="FINISHED"}(c||(c={})),function(e){e.WIN="WIN",e.LOSE="LOSE",e.NEVER="NEVER"}(s||(s={})),function(e){e.ME="ME",e.ENEMY="ENEMY",e.NEVER="NEVER"}(n||(n={}));var j,b=a(0),m=function(e){var t=e.size,a=void 0===t?"default":t,c="big"===a?"icon--big":"small"===a?"icon--small":"";return Object(b.jsxs)("span",{className:"match-icon ".concat(c),children:[Object(b.jsx)("i",{children:"\ud83d\udd25"}),Object(b.jsx)("i",{})]})},d=function(e){var t=e.gameTurn,a=e.showSettingsHandler,s=e.gameStatus;return Object(b.jsxs)("div",{className:"game-header",children:[Object(b.jsx)("div",{className:"game-header__title",children:s!==c.INGAME?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{className:"",children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0438\u0433\u0440\u0430\u0442\u044c"}),Object(b.jsx)(m,{size:"small"})]}):t===n.ME?Object(b.jsx)("h3",{className:"your-turn",children:"\u0412\u0430\u0448 \u0445\u043e\u0434"}):Object(b.jsxs)("h3",{className:"enemy-turn",children:["\u0425\u043e\u0434 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430 ",Object(b.jsx)("span",{className:"time-icon",children:"\u231b"})]})}),Object(b.jsx)("div",{className:"game-header__action",children:Object(b.jsx)("button",{className:"btn btn--settings",onClick:function(){return a(!0)},children:"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u2699\ufe0f"})})]})},h=function(e){var t=e.oponent,a=e.playerLog,c=t?"bot":"player";return Object(b.jsx)("div",{className:"player-stats__log",children:a.map((function(e,t){return Object(b.jsx)("div",{className:"player-stats__action",children:e},e+c+t)}))})},O=function(e){var t=e.oponent,a=e.count,c=e.playerLog;return Object(b.jsx)(b.Fragment,{children:t?Object(b.jsxs)("div",{className:"players-container__column",children:[Object(b.jsx)("h4",{className:"oponent",children:"\u0421\u043e\u043f\u0435\u0440\u043d\u0438\u043a"}),Object(b.jsxs)("div",{className:"player-stats__wrapper",children:[Object(b.jsxs)("div",{className:"player-stats-container",children:[Object(b.jsx)(m,{}),Object(b.jsx)("div",{className:"player-stats__counter",children:a})]}),Object(b.jsx)(h,{playerLog:c})]})]}):Object(b.jsxs)("div",{className:"players-container__column",children:[Object(b.jsx)("h4",{children:"\u0412\u044b"}),Object(b.jsxs)("div",{className:"player-stats__wrapper",children:[Object(b.jsxs)("div",{className:"player-stats-container",children:[Object(b.jsx)(m,{}),Object(b.jsx)("div",{className:"player-stats__counter",children:a})]}),Object(b.jsx)(h,{playerLog:c,oponent:!0})]})]})})},g=function(e){var t=e.status,a=e.gameStats;return Object(b.jsx)("div",{className:"players-container",children:t!==c.PREPARE&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O,{count:a.player,playerLog:a.playerLog}),Object(b.jsx)(O,{count:a.bot,playerLog:a.botLog,oponent:!0})]})})};!function(e){e.CHANGE_GAME_STATUS="CHANGE_GAME_STATUS",e.CHANGE_GAME_RESULT="CHANGE_GAME_RESULT",e.CHANGE_GAME_TURN="CHANGE_GAME_TURN",e.APPLY_SETTINGS="APPLY_SETTINGS",e.APPLY_MATCHES_CHOSE="APPLY_MATCHES_CHOSE",e.BOT_CHOSE="BOT_CHOSE",e.RESTART_GAME="RESTART_GAME"}(j||(j={}));var N=function(e){return{type:j.CHANGE_GAME_TURN,payload:e}},x=function(){return{type:j.RESTART_GAME}},E=function(e){return e%2===0};function p(e,t){var a=e.settings.maximumMatchesToChose,r=e.game.currentMatchesCount,i=e.game.player,l=e.game.bot;return{botChose:function(){setTimeout((function(){if(0!==r){var e,c,s,o,u,b,m=a<=r?a:r;2*a>r?(o=l,e=(u=r)>a?1===u-a&&E(i)?a:E(l+1)?1:2:E(o+u)?u:0!==u?1===u?1:u-1:0):(c=1,s=m,e=Math.round(c-.5+Math.random()*(s-c+1))),t((b=e,{type:j.BOT_CHOSE,payload:b})),t(N(n.ME))}}),1500)},checkGameResult:function(e,t){if(0===r)return E(i)?e(s.WIN):e(s.LOSE),void t(c.FINISHED)}}}var _=i.a.createContext(null),v=function(e){var t=e.maxCount,a=e.currentCount;return Object(b.jsx)(b.Fragment,{children:new Array(t>=10?9:t).fill(0,0).map((function(e,t){return Object(b.jsx)("button",{className:"btn btn--num ".concat(t+1>a?"btn--no-active":""),"data-value":t+1,children:t+1},"btn".concat(t))}))})},f=function(e){var t=e.matchesInfo,a=e.sendChose,c=e.turn,s=Object(r.useState)(!1),i=Object(u.a)(s,2),l=i[0],o=i[1],j=Object(r.useState)(0),m=Object(u.a)(j,2),d=m[0],h=m[1],O=function(e,a){return!isNaN(e)&&e>(a?-1:0)&&e<=t.currentMatchesCount&&e<=t.maximumMatchesToChose};return Object(b.jsxs)("div",{className:"actions-block",children:[Object(b.jsx)("div",{className:"actions-block__line action-line--first",children:Object(b.jsx)("button",{className:"btn ".concat(l||c!==n.ME&&"btn--no-active"),onClick:function(){c===n.ME&&o(!0)},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0438\u0447\u043a\u0438"})}),Object(b.jsx)("div",{className:"actions-block__line",children:l&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"actions-block__title",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u0441\u043f\u0438\u0447\u0435\u043a:"}),Object(b.jsxs)("div",{className:"actions-block__buttons-container",onClick:function(e){if(e.target.classList.contains("btn")){var t=Number(e.target.dataset.value);O(t)&&(a(t),o(!1))}},children:[Object(b.jsx)(v,{maxCount:t.maximumMatchesToChose,currentCount:t.currentMatchesCount}),t.maximumMatchesToChose>=10&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{className:"actions-block__label",children:"\u041b\u0438\u0431\u043e \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e"}),Object(b.jsxs)("div",{className:"actions-block__input-container",children:[Object(b.jsx)("input",{type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e",onChange:function(e){var t=Number(e.target.value);O(t,!0)&&h(t)},value:d}),Object(b.jsx)("button",{className:"btn btn--apply-chose ".concat(0===d&&"btn--no-active"),onClick:function(){O(d)&&(a(d),o(!1))},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"})]})]})]})]})})]})},M=function(e){var t=e.matchesInfo;return Object(b.jsxs)("div",{className:"matches-stats",children:[Object(b.jsx)(m,{size:"big"}),Object(b.jsxs)("div",{className:"matches-stats__counter",children:[Object(b.jsx)("span",{className:"counter-item",children:t.currentMatchesCount}),Object(b.jsx)("span",{className:"counter-item",children:"/"}),Object(b.jsx)("span",{className:"counter-item",children:t.totalMatches})]})]})},C=function(e){var t=e.gameStatusHandler,a=e.gameResultHandler,c=e.gameTurnHandler,s=Object(r.useContext)(_),i=s.state,l=s.dispatch,o={currentMatchesCount:i.game.currentMatchesCount,maximumMatchesToChose:i.settings.maximumMatchesToChose,totalMatches:i.settings.totalMatches},u=p(i,l),m=u.botChose,d=u.checkGameResult;Object(r.useEffect)((function(){c(i.settings.firstTurn)}),[]),Object(r.useEffect)((function(){d(a,t)}),[o.currentMatchesCount]),Object(r.useEffect)((function(){i.gameTurn===n.ENEMY&&m()}),[i.gameTurn]);return Object(b.jsxs)("div",{className:"game-active__wrapper",children:[Object(b.jsxs)("span",{className:"limit-label",children:["\u041b\u0438\u043c\u0438\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0441\u043f\u0438\u0447\u0435\u043a: ",Object(b.jsxs)("b",{children:[o.maximumMatchesToChose," \u0448\u0442."]})]}),Object(b.jsx)(M,{matchesInfo:o}),Object(b.jsx)(f,{matchesInfo:o,sendChose:function(e){var t;l(N(n.ENEMY)),l((t=e,{type:j.APPLY_MATCHES_CHOSE,payload:t}))},turn:i.gameTurn})]})},S=function(e){var t=e.gameStatusHandler,a=e.restartGameHandler,n=e.status,r=e.result;return Object(b.jsx)("div",{className:"game-prepare__wrapper",children:n===c.PREPARE?Object(b.jsx)("button",{className:"btn",onClick:function(){return t(c.INGAME)},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"}):n===c.FINISHED&&Object(b.jsxs)("div",{className:"game-result__container",children:[r===s.WIN?Object(b.jsx)("h3",{className:"win",children:"\u041f\u043e\u0431\u0435\u0434\u0430 !"}):Object(b.jsx)("h3",{className:"lose",children:"\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(b.jsx)("button",{className:"btn",onClick:function(){t(c.INGAME),a()},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"})]})})},T=a(7),A=a(2),y={gameResult:s.NEVER,gameStatus:c.PREPARE,gameTurn:n.NEVER,game:{currentMatchesCount:25,player:0,bot:0,playerLog:[],botLog:[]},settings:{totalMatches:25,maximumMatchesToChose:3,firstTurn:n.ME}};function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.CHANGE_GAME_STATUS:return Object(A.a)(Object(A.a)({},e),{},{gameStatus:t.payload});case j.CHANGE_GAME_RESULT:return Object(A.a)(Object(A.a)({},e),{},{gameResult:t.payload});case j.CHANGE_GAME_TURN:return Object(A.a)(Object(A.a)({},e),{},{gameTurn:t.payload});case j.APPLY_SETTINGS:return Object(A.a)(Object(A.a)({},e),{},{settings:Object(A.a)({},t.payload)});case j.APPLY_MATCHES_CHOSE:return Object(A.a)(Object(A.a)({},e),{},{game:Object(A.a)(Object(A.a)({},e.game),{},{player:e.game.player+t.payload,playerLog:[].concat(Object(T.a)(e.game.playerLog),["\u0412\u0437\u044f\u043b ".concat(t.payload)]),currentMatchesCount:e.game.currentMatchesCount-t.payload})});case j.BOT_CHOSE:return Object(A.a)(Object(A.a)({},e),{},{game:Object(A.a)(Object(A.a)({},e.game),{},{bot:e.game.bot+t.payload,botLog:[].concat(Object(T.a)(e.game.botLog),["\u0412\u0437\u044f\u043b ".concat(t.payload)]),currentMatchesCount:e.game.currentMatchesCount-t.payload})});case j.RESTART_GAME:return Object(A.a)(Object(A.a)({},y),{},{gameStatus:c.INGAME,gameTurn:e.settings.firstTurn,game:Object(A.a)(Object(A.a)({},y.game),{},{currentMatchesCount:e.settings.totalMatches}),settings:Object(A.a)({},e.settings)});default:return e}}var G=function(e){var t=e.title,a=e.active,c=void 0!==a&&a,s=e.onClick;return Object(b.jsx)("button",{className:"btn switch-btn ".concat(c&&"switch-btn--active"),onClick:s,children:t})},R=function(e){var t=e.title,a=e.titleHint,c=e.groupField,s=e.children;return Object(b.jsxs)("div",{className:"settings__row",children:[Object(b.jsxs)("div",{className:"settings__row--title",children:[t,a&&Object(b.jsxs)("span",{children:["(",a,")"]})]}),Object(b.jsx)("div",{className:"settings__row--field ".concat(c?"settings__row--group-field":""),children:s})]})},I=function(e){var t=e.showSettingsHandler,a=Object(r.useContext)(_),s=a.state,i=a.dispatch,l=Object(r.useState)(""),o=Object(u.a)(l,2),m=o[0],d=o[1],h=Object(r.useState)(s.settings.totalMatches),O=Object(u.a)(h,2),g=O[0],N=O[1],E=Object(r.useState)(s.settings.maximumMatchesToChose),p=Object(u.a)(E,2),v=p[0],f=p[1],M=Object(r.useState)(s.settings.firstTurn),C=Object(u.a)(M,2),S=C[0],T=C[1];return Object(b.jsxs)("div",{className:"game-settings__wrapper",children:[Object(b.jsx)("button",{className:"btn btn--close",onClick:function(){return t(!1)},children:"\xd7"}),Object(b.jsx)("h3",{className:"settings__title",children:"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(b.jsxs)("div",{className:"settings__body",children:[Object(b.jsxs)(R,{title:"\u041f\u0435\u0440\u0432\u044b\u0439 \u0445\u043e\u0434",groupField:!0,children:[Object(b.jsx)(G,{title:"\u041c\u043e\u0439",active:S===n.ME,onClick:function(){return T(n.ME)}}),Object(b.jsx)(G,{title:"\u0421\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430",active:S===n.ENEMY,onClick:function(){return T(n.ENEMY)}})]}),Object(b.jsxs)(R,{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0438\u0447\u0435\u043a",titleHint:"\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0447\u0435\u0442\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e",children:[Object(b.jsx)("input",{type:"text",value:g,onChange:function(e){var t=Number(e.target.value);isNaN(t)||t<1001&&N(t)}}),Object(b.jsx)("span",{className:"input-hint",children:"max:1000"})]}),Object(b.jsx)(R,{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0441\u043f\u0438\u0447\u0435\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0437\u0430 \u0445\u043e\u0434",children:Object(b.jsx)("input",{type:"text",value:v,onChange:function(e){var t=Number(e.target.value);isNaN(t)||t<g&&f(t)}})}),Object(b.jsx)("div",{className:"settings__error-label",children:m})]}),Object(b.jsx)("div",{className:"settings__footer",children:Object(b.jsxs)("button",{className:"btn btn--white",onClick:function(){var e;v+1>=g?d("\u0412\u044b\u0431\u043e\u0440 \u0441\u043f\u0438\u0447\u0435\u043a \u0437\u0430 \u0445\u043e\u0434, \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043c\u0435\u043d\u044c\u0448\u0435!"):v<2?d("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 2"):g<5?d("\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e 5 \u0441\u043f\u0438\u0447\u0435\u043a"):g%2!==0?(d(""),i((e={totalMatches:g,maximumMatchesToChose:v,firstTurn:S},{type:j.APPLY_SETTINGS,payload:e})),i(x()),t(!1)):d("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0438\u0447\u0435\u043a \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u0447\u0435\u0442\u043d\u044b\u043c")},children:["\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c ",s.gameStatus!==c.PREPARE&&" \u0438 \u043d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"]})})]})},L=function(){var e=Object(r.useReducer)(H,y),t=Object(u.a)(e,2),a=t[0],s=t[1],n=Object(r.useState)(!1),i=Object(u.a)(n,2),l=i[0],o=i[1],m=function(e){var t;s((t=e,{type:j.CHANGE_GAME_STATUS,payload:t}))};return Object(b.jsx)(_.Provider,{value:{dispatch:s,state:a},children:Object(b.jsxs)("div",{className:"game",children:[Object(b.jsx)(d,{gameTurn:a.gameTurn,showSettingsHandler:o,gameStatus:a.gameStatus}),Object(b.jsxs)("div",{className:"game-main-container",children:[a.gameStatus===c.INGAME?Object(b.jsx)(C,{gameStatusHandler:m,gameResultHandler:function(e){var t;s((t=e,{type:j.CHANGE_GAME_RESULT,payload:t})),m(c.FINISHED)},gameTurnHandler:function(e){s(N(e))},status:a.gameStatus}):Object(b.jsx)(S,{gameStatusHandler:m,restartGameHandler:function(){s(x())},status:a.gameStatus,result:a.gameResult}),l&&Object(b.jsx)(I,{showSettingsHandler:o})]}),Object(b.jsx)(g,{status:a.gameStatus,gameStats:a.game})]})})};var P=function(){return Object(b.jsx)("div",{className:"root-wrapper",children:Object(b.jsx)("div",{className:"main-window",children:Object(b.jsx)("div",{className:"main-window__wrapper",children:Object(b.jsx)(L,{})})})})};o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.385f845b.chunk.js.map